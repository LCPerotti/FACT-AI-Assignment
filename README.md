# Paper: Replication and expansion for "Competition of Mechanisms"
This repo contains the code for Reproducibility study of: "Competition of Mechanisms: Tracing How Language Models Handle Facts and Counterfactuals".
The code is based on the code from the original paper [Competition of Mechanisms: Tracing How Language Models Handle Facts and Counterfactuals
](https://arxiv.org/abs/2402.11655), which can be found on [the authors' github](https://github.com/francescortu/comp-mech).
The datasets used are also available on [HuggingFace](https://huggingface.co/datasets/francescortu/comp-mech).

## Install environment
An environment file for conda has been made. To install it, run:
```bash
conda env create -f environment.yml
```

Activate it with:
```bash
conda activate paperEnv
```

## Run experiments
All of the experiments from the original paper as well as our own, can be found in the `Run_experiments.ipynb` notebook. In it, either the plots and results from the report can be replicated, or new CSVs can be generated by setting the `CREATE_CSVS` boolean to `True`.

Edited scripts based on the original code can still be found in the `original_paper_code` directory, including their `README.md`, including instructions for how to run their code. Although to run their plotting code, an R environment will need to be installed.
